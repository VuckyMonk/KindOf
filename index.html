<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Anime List</title>
    <style>
        /* General Styles */
        body { 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; 
            background-color: #f4f4f9; 
            color: #333; 
            margin: 0; 
            padding: 20px;
        }
        .container { 
            max-width: 800px; 
            margin: auto; 
            background: #ffffff; 
            padding: 20px; 
            border-radius: 8px; 
            box-shadow: 0 4px 8px rgba(0,0,0,0.1); 
        }
        h1 { 
            text-align: center; 
            color: #4a4a88; 
        }
        button, .action-button {
            border: none;
            padding: 12px 20px;
            border-radius: 5px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            text-decoration: none;
            color: white;
            display: inline-block;
            text-align: center;
        }

        /* List View Styles */
        #listView .add-button {
            display: block;
            width: 200px;
            margin: 20px auto;
            background: #28a745;
        }
        #listView .add-button:hover {
            background: #218838;
        }
        .anime-item { 
            background: #eef; 
            padding: 15px; 
            margin-bottom: 10px; 
            border-radius: 5px; 
            border-left: 5px solid #6677cc; 
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .anime-item a { 
            text-decoration: none; 
            font-weight: bold; 
            font-size: 1.2em; 
            color: #333; 
        }
        .anime-item a:hover { 
            color: #4a4a88; 
        }
        .anime-item .delete-btn {
            background-color: #dc3545;
            color: white;
            padding: 5px 10px;
            font-size: 0.8em;
            border-radius: 4px;
        }
        .anime-item .delete-btn:hover {
            background-color: #c82333;
        }

        /* Add View Styles */
        #addView {
            max-width: 600px;
        }
        #addView form { 
            display: flex; 
            flex-direction: column; 
        }
        #addView label { 
            margin-bottom: 5px; 
            font-weight: bold; 
        }
        #addView input { 
            padding: 10px; 
            margin-bottom: 15px; 
            border: 1px solid #ccc; 
            border-radius: 4px; 
            font-size: 1em; 
        }
        #addView .save-button { 
            background: #007bff; 
        }
        #addView .save-button:hover { 
            background: #0056b3; 
        }
        #addView .back-button {
            background-color: #6c757d;
            margin-top: 10px;
        }
        #addView .back-button:hover {
            background-color: #5a6268;
        }

    </style>
</head>
<body>

    <section id="listView" class="container">
        <h1>My Anime Watch List</h1>
        <button class="add-button" onclick="showAddView()">Add New Anime</button>
        <div id="animeListContainer">
            </div>
    </section>

    <section id="addView" class="container" style="display: none;">
        <h1>Add a New Anime</h1>
        <form id="addAnimeForm">
            <label for="animeTitle">Anime Title:</label>
            <input type="text" id="animeTitle" required>
            
            <label for="animeLink">Watch Link:</label>
            <input type="url" id="animeLink" placeholder="https://example.com" required>

            <button type="submit" class="save-button">Save to List</button>
        </form>
        <button class="back-button" onclick="showListView()">Back to my list</button>
    </section>

    <script>
        // === GLOBAL VARIABLES ===
        const listView = document.getElementById('listView');
        const addView = document.getElementById('addView');
        const animeListContainer = document.getElementById('animeListContainer');
        const addAnimeForm = document.getElementById('addAnimeForm');

        // === VIEW SWITCHING LOGIC ===
        function showListView() {
            addView.style.display = 'none';
            listView.style.display = 'block';
            displayAnimeList(); // Refresh the list every time we show it
        }

        function showAddView() {
            listView.style.display = 'none';
            addView.style.display = 'block';
            addAnimeForm.reset(); // Clear form fields
        }

        // === DATA HANDLING LOGIC ===

        /**
         * Reads the anime list from localStorage.
         * @returns {Array} An array of anime objects.
         */
        function getAnimeList() {
            return JSON.parse(localStorage.getItem('myAnimeList')) || [];
        }

        /**
         * Saves the anime list to localStorage.
         * @param {Array} animeList The array of anime objects to save.
         */
        function saveAnimeList(animeList) {
            localStorage.setItem('myAnimeList', JSON.stringify(animeList));
        }

        /**
         * Adds a new anime to the list and saves it.
         */
        function addAnime(event) {
            event.preventDefault(); // Prevent page reload
            const title = document.getElementById('animeTitle').value;
            const link = document.getElementById('animeLink').value;
            
            const animeList = getAnimeList();
            animeList.push({ title, link });
            saveAnimeList(animeList);
            
            showListView(); // Switch back to the list view
        }
        
        /**
         * Deletes an anime from the list by its index.
         */
        function deleteAnime(index) {
            if (confirm('Are you sure you want to delete this item?')) {
                const animeList = getAnimeList();
                animeList.splice(index, 1); // Remove the item at the specified index
                saveAnimeList(animeList);
                displayAnimeList(); // Refresh the list view
            }
        }

        /**
         * Renders the anime list to the page.
         */
        function displayAnimeList() {
            const animeList = getAnimeList();
            animeListContainer.innerHTML = ''; // Clear current list

            if (animeList.length === 0) {
                animeListContainer.innerHTML = '<p style="text-align: center;">Your list is empty! Add some anime.</p>';
                return;
            }

            animeList.forEach((anime, index) => {
                // Create the main container div
                const animeDiv = document.createElement('div');
                animeDiv.className = 'anime-item';

                // Create the link element
                const animeLink = document.createElement('a');
                animeLink.textContent = anime.title;
                animeLink.href = anime.link;
                animeLink.target = '_blank'; // Open in a new tab

                // Create the delete button
                const deleteButton = document.createElement('button');
                deleteButton.textContent = 'Delete';
                deleteButton.className = 'delete-btn';
                deleteButton.onclick = () => deleteAnime(index); // Pass the index to the delete function

                // Append elements to the container
                animeDiv.appendChild(animeLink);
                animeDiv.appendChild(deleteButton);
                animeListContainer.appendChild(animeDiv);
            });
        }

        // === INITIALIZATION ===
        
        // Add event listener to the form
        addAnimeForm.addEventListener('submit', addAnime);

        // Show the main list view when the page first loads
        document.addEventListener('DOMContentLoaded', showListView);
    </script>

</body>
</html>
